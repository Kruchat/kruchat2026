# System Overview: Teacher Self-Development App

## ภาพรวมของสถาปัตยกรรมระบบ (Architecture)
แอพพลิเคชันนี้ใช้แนวคิด **Serverless โค้ดทำงานผ่าน Google Infrastructure** โดยไม่มีเซิร์ฟเวอร์แยก

1. **Frontend**:
   - พัฒนาด้วย **React (Vite) + Tailwind CSS**
   - รูปแบบหน้าตา Single Page Application (SPA)
   - ไฟล์ Build ของแอพจะถูก Host เอาไว้บนเว็บสถิตอย่าง **GitHub Pages** (ฟรีตลอดชีพโดยไม่ต้องต่ออายุ)
   - ข้อมูลและ API ถูกโหลดมาจาก Backend ด้วยคำสั่ง `fetch()` แลกเปลี่ยนข้อมูลกลับในรูปแบบ JSON

2. **Backend**:
   - โค้ดทำงานผ่านแอพพลิเคชันเสริมของ Google คือ **Google Apps Script**
   - รันในช่องทาง `doPost` เพื่อรองรับ Payload JSON จากหน้าบ้าน React
   - **Authentication**: ตรวจสอบบัญชีผู้ใช้ด้วยคำสั่งจากเซสชั่นของ Google (`Session.getActiveUser().getEmail()`) หมายความว่าผู้ใช้งานจะได้รับสิทธิ์เข้าใช้งานแอพนี้หากผู้ใช้ Login ไอดีของตนเองเอาไว้ในระบบเบราว์เซอร์แล้ว (ซึ่งทางแอพเราจะได้อีเมลผู้ใช้อัตโนมัติเมื่อเขากดเข้า Web app URL และกดยอมรับสิทธิ์)
   - **Authorization**: แบ่งผู้ใช้ออกเป็น Admin ยืนยันสิทธิ์จากฐานข้อมูล Google Sheets

3. **Database**:
   - บันทึกและเรียกอ่านข้อมูลจากตารางของ **Google Sheets**
   - แบ่งตารางแยกตามระบบคือ ผู้ใช้, ประวัติกิจกรรมของครู, ไฟล์แนบ, รายการสมรรถนะ, การตั้งค่า, ระบบลงล็อก (Audit Log)
   - สร้างขึ้นให้อัตโนมัติในทันทีที่คำสั่ง Backend (`Code.gs`) ถูกเรียกครั้งแรก

## ข้อจำกัดด้านระบบบัญชี Google Account (สำคัญมาก!)

เนื่องจาก Google Apps Script เมื่อนำไป Publish เป็น **Web App Execute As: Me** หากเราจะขอใช้อีเมลคนที่เข้ามาเรียก API ผ่านแบบ Server-to-Server (กรณีที่ React เรา Host อยู่ที่อื่นเช่น GitHub Pages) **ทาง Apps Script จะปิดกั้นข้อมูลและส่งเมลมาบอกว่า Session.getActiveUser().getEmail() "ว่างเปล่า"** เนื่องจากป้องกันการละเมิดความเป็นส่วนตัว

**ทางแก้ที่ดีที่สุดคือ:** ผู้ใช้จะต้องเข้าถึงหน้า React ของเรา แล้วหน้า React จะเรียก API `doPost` ไปที่ URL ของ GAS... แต่ GAS จะไม่มีทางรู้ว่าคุณคือใคร ถ้าหากคุณไม่ได้อนุญาตให้โปรเจกต์นี้เข้าถึงอีเมลของคุณ ดังนั้นตอนเข้าครั้งแรก ผู้ใช้จะต้อง **กดอนุญาตสิทธิ์จาก Web app URL ต้นทางของ GAS ตรงๆ ก่อน** แล้วหลังจากนั้นเมื่อไปที่ React (GitHub Pages) บัญชีของคุณก็จะเชื่อมต่อกันตลอดໄປ.
